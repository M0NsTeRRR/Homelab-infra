{
	"name": "{{ item }}.",
	"kind": "Master",
	"masters": ["{{ inventory_hostname }}"],
	"dnssec": true,
	"soa-edit": "INCEPTION-INCREMENT",
  	"rrsets": [
  		{
  			"name": "{{ item }}.",
  			"records": [
  				{ "content": "{{ hostvars[groups['dns'][0]].canonical_hostname }} admin.{{ hostvars[groups['dns'][0]].canonical_hostname }}. {{ inception_date }} 10800 3600 604800 3600", "disabled": false }
  			],
  			"ttl": "3600",
          	"type": "SOA"
  		},{
  			"name": "{{ item }}.",
  			"records": [
  				{% for host in groups['dns'] %}
  				{ "content": "{{ hostvars[host].canonical_hostname }}", "disabled": false }{% if not loop.last %},{% endif %}
  				{% endfor %}
  			],
  			"ttl": "3600",
          	"type": "NS"
  		}{% for host in groups['dns'] %}{% if item in hostvars[host].canonical_hostname %},
  		{
  			"name": "{{ hostvars[host].canonical_hostname }}",
  			"records": [
  				{ "content": "{{ host }}", "disabled": false }
  			],
  			"ttl": "3600",
          	"type": "A"
  		},{
  			"name": "{{ hostvars[host].canonical_hostname }}",
  			"records": [
  				{ "content": "{{ hostvars[host].ipv6 }}", "disabled": false }
  			],
  			"ttl": "3600",
          	"type": "AAAA"
  		}{% endif %}{% endfor %}{% for host in groups['dns'] %}{% if item in host|ipaddr("revdns") %},
  		{
  			"name": "{{ host|ipaddr("revdns") }}",
  			"records": [
  				{ "content": "{{ hostvars[host].canonical_hostname }}", "disabled": false }
  			],
  			"ttl": "3600",
        "type": "PTR"
  		}{% endif %}{% endfor %}{% for host in groups['dns'] %}{% if item in hostvars[host].ipv6|ipaddr("revdns") %},
  		{
  			"name": "{{ hostvars[host].ipv6|ipaddr("revdns") }}",
  			"records": [
  				{ "content": "{{ hostvars[host].canonical_hostname }}", "disabled": false }
  			],
  			"ttl": "3600",
        "type": "PTR"
  		}{% endif %}{% endfor %}
  	]
}